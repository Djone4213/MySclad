# Docker контейнер для поднятия Демо-приложение на PHP для Маркетплейса МоегоСклада (https://github.com/moysklad/php-dummyapp-marketplace-1.0)

В папке data находятся файлы с https://github.com/moysklad/php-dummyapp-marketplace-1.0 из папки src/php

## Настройка

Необходимо выполнить настройку согласно иструкции в репозитории приложения

## Настройка (конфигурирование) приложения

Перед использованием приложения нужно настроить следующие конфигурационные параметры:

* `appId`                           - идентификатор приложения в Маркетплейсе
* `appUid`                          - appUid приложения в  в Маркетплейсе
* `secretKey`                       - секретный ключ для подписи JWT
* `appBaseUrl`                      - базовый URL приложения, должен указывать на содержимое `./src/php` (сейчас используется при генерации дескриптора)

Для настройки конфигурационных параметров нужно скопировать файл `config.tpl.php` в файл `config.php` 
и указать ваши актуальные значения в файле `config.php`.

В папке nginx необходимо создать папку ssl и положить в папку сертификат и ключ

В файле nginx/defailt.conf необходимо настроить ssl соединение для секции server listen 443
server_name domen; - указать домен
ssl_certificate /etc/nginx/ssl/domen.crt; - указать имя сертификата
ssl_certificate_key /etc/nginx/ssl/domen.key; - указать имя ключа

## Установка

docker-compose build

docker-compose up -d

## Получение дескриптора приложения для apps.moysclad.ru

После запуска запустить domen/utils/generate-descriptor.php и полученный результат вставить на сайте apps.moysclad.r в конфигурацию приложения в поле Дескриптор приложения
